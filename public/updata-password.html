<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <title>Update Password</title>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
          <script src="https://cdn.tailwindcss.com"></script>
          </head>
          <body class="bg-gray-100 flex items-center justify-center min-h-screen">
            <div class="bg-white p-8 rounded-xl shadow-md w-full max-w-md">
                <h2 class="text-2xl font-bold mb-6 text-center">Set New Password</h2>
                    <form id="updatePasswordForm" class="space-y-4">
                          <div>
                                  <label for="password" class="block text-sm font-medium text-gray-700">New Password</label>
                                          <input type="password" id="password" name="password" required minlength="6"
                                                    class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                                          </div>
                                                                <button type="submit"
                                                                        class="w-full bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition">
                                                                                Update Password
                                                                                      </button>
                                                                                          </form>
                                                                                            </div>

                                                                                              <script type="module">
                                                                                                  import { supabase } from "../js/auth.js";

                                                                                                      const form = document.getElementById("updatePasswordForm");

                                                                                                          form.addEventListener("submit", async (e) => {
                                                                                                                e.preventDefault();
                                                                                                                      const password = form.password.value;

                                                                                                                            const { error } = await supabase.auth.updateUser({ password });

                                                                                                                                  if (error) {
                                                                                                                                          Swal.fire({
                                                                                                                                                    icon: 'error',
                                                                                                                                                              title: 'Error',
                                                                                                                                                                        text: error.message,
                                                                                                                                                                                });
                                                                                                                                                                                      } else {
                                                                                                                                                                                              Swal.fire({
                                                                                                                                                                                                        icon: 'success',
                                                                                                                                                                                                                  title: 'Password Updated',
                                                                                                                                                                                                                            text: 'You will now be redirected...',
                                                                                                                                                                                                                                      timer: 2000,
                                                                                                                                                                                                                                                showConfirmButton: false,
                                                                                                                                                                                                                                                        });

                                                                                                                                                                                                                                                                setTimeout(() => {
                                                                                                                                                                                                                                                                          window.location.href = "/public/dashboard.html";
                                                                                                                                                                                                                                                                                  }, 2000);
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                            });
                                                                                                                                                                                                                                                                                              </script>
                                                                                                                                                                                                                                                                                              </body>
                                                                                                                                                                                                                                                                                              </html>