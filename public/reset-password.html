<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <title>Reset Password</title>
        <script src="https://cdn.tailwindcss.com"></script>
          <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
          </head>
          <body class="bg-gray-100 flex items-center justify-center h-screen">
            <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md">
                <h2 class="text-2xl font-bold mb-6 text-center">Forgot Password?</h2>
                    <form id="resetPasswordForm" class="space-y-4">
                          <input
                                  type="email"
                                          id="email"
                                                  placeholder="Enter your email"
                                                          required
                                                                  class="w-full px-4 py-2 border rounded-lg"
                                                                        />
                                                                              <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">
                                                                                      Send Reset Link
                                                                                            </button>
                                                                                                </form>
                                                                                                  </div>

                                                                                                    <script type="module">
                                                                                                        import { supabase } from "../js/auth.js";

                                                                                                            const form = document.getElementById("resetPasswordForm");

                                                                                                                form.addEventListener("submit", async (e) => {
                                                                                                                      e.preventDefault();
                                                                                                                            const email = form.email.value;

                                                                                                                                  const { error } = await supabase.auth.resetPasswordForEmail(email, {
                                                                                                                                          redirectTo: `${window.location.origin}/public/update-password.html`
                                                                                                                                                });

                                                                                                                                                      if (error) {
                                                                                                                                                              Swal.fire("Error", error.message, "error");
                                                                                                                                                                    } else {
                                                                                                                                                                            Swal.fire(
                                                                                                                                                                                      "Success",
                                                                                                                                                                                                "Password reset link sent! Check your email.",
                                                                                                                                                                                                          "success"
                                                                                                                                                                                                                  );
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                            });
                                                                                                                                                                                                                              </script>
                                                                                                                                                                                                                              </body>
                                                                                                                                                                                                                              </html>